<!DOCTYPE html>
<html lang="en" class="gr__friend-finder-fsf_herokuapp_com">

<head>
	<meta charset="UTF-8">
	<title>FriendFinder</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	<style>
		ul li:nth-child(odd) {
			background: rgb(249, 249, 249);
		}

		.modal-body .user-name {
			display: block;
			padding: 10px;
			width: 50%;
			float: right;
		}

		.modal-body .user-image {
			display: block;
			float: left;
			width: 50%;
			padding: 0 10px 0 0;
		}
	</style>
</head>

<body data-gr-c-s-loaded="true">
	<div class="container" style="max-width: 720px;">
		<div class="jumbotron mt-4">
			<h1>
				<i class="fas fa-couch"></i> Friend Finder</h1>
		</div>
		<h2 class="">Survey Questions
			<i class="fas fa-address-card text-black-50 pl-2"></i>
		</h2>
		<hr class="my-4">
		<h3>About You</h3>
		<div class="form-group">
			<label for="">Name (Required)</label>
			<input type="text" id="name" class="form-control" required=""> </div>
		<div class="form-group">
			<label for="">Link to Photo Image (Required)</label>
			<input type="text" id="photo" class="form-control" required=""> </div>
		<div class="card mb-3">
			<ul class="list-group list-group-flush">
				<li class="list-group-item">
					<div class="form-group">
						<label for="q1">1. You tend to find one precious object and love it forever.</label>
						<select class="custom-select" id="q1">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q2">2. Dwarves are loud and disgusting.</label>
						<select class="custom-select" id="q2">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q3">3. A beard on a woman can only add to her beauty.</label>
						<select class="custom-select" id="q3">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q4">4. You're ready for this quest to be over so you can get back home.</label>
						<select class="custom-select" id="q4">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q5">5. You are never late, nor early, you arrive precisely when you mean to.</label>
						<select class="custom-select" id="q5">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q6">6. You are your own best conversationalist.</label>
						<select class="custom-select" id="q6">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q7">7. You're okay with being tossed now and again, just don't tell the elf.</label>
						<select class="custom-select" id="q7">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q8">8. You're willing to take on heavy burdens for the sake of good.</label>
						<select class="custom-select" id="q8">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q9">9. You find elves rather arrogant and weak.</label>
						<select class="custom-select" id="q9">
							<option value="">Choose...</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>
				</li>
				<li class="list-group-item">
					<div class="form-group">
						<label for="q10">10. You often find yourself in a position to give out bits of wisdom to the ones around you.</label>
						<div class="input-group mb-3">
							<select class="custom-select" id="q10">
								<option value="">Choose...</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<!-- Submit Button -->
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
			<i class="fa fa-check-circle" aria-hidden="true"></i> Submit </button>
		<hr>
		<footer class="footer">
			<div class="container">
				<p>
					<a href="/api/friends">API Friends List</a> |
					<a href="https://github.com/joshcoast/friendfinder">GitHub Repo</a>
				</p>
			</div>
		</footer>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="results-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Best Match</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h2 id="match-name" class="user-name"></h2>
					<img id="match-img" class="user-image" src="https://vignette.wikia.nocookie.net/lotr/images/8/8d/Gandalf-2.jpg/revision/latest?cb=20130209172436" alt="Profile Picture"> </div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		// Capture the form inputs
		$("#submit").on("click", function (event) {
			event.preventDefault();
			// Form validation
			function validateForm() {
				var isValid = true;
				$(".form-control").each(function () {
					if ($(this).val() === "") {
						isValid = false;
					}
				});
				$(".chosen-select").each(function () {
					if ($(this).val() === "") {
						isValid = false;
					}
				});
				return isValid;
			}
			// If all required fields are filled
			if (validateForm()) {
				// Create an object for the users data
				var userData = {
					name: $("#name").val(),
					photo: $("#photo").val(),
					scores: [
						parseInt($("#q1").val()),
						parseInt($("#q2").val()),
						parseInt($("#q3").val()),
						parseInt($("#q4").val()),
						parseInt($("#q5").val()),
						parseInt($("#q6").val()),
						parseInt($("#q7").val()),
						parseInt($("#q8").val()),
						parseInt($("#q9").val()),
						parseInt($("#q10").val())
					]
				};
				//userData = JSON.stringify(userData);
				console.dir(userData);
				// AJAX post the data to the friends API.
/* 				$.post("/api/friends", userData, function (data) {
					// Grab the result from the AJAX post so that the best match's name and photo are displayed.
					console.log(data);
					$("#match-name").text(data.name);
					$("#match-img").attr("src", data.photo);
					// Show the modal with the best match
					$("#results-modal").modal("toggle");
				}); */
				$.ajax({
					url: "/api/friends",
					type: "POST",
					data: JSON.stringify(userData),
					contentType: "application/json",
				}).done(function( data ) {
					console.log(data);
					$("#match-name").text(data.name);
					$("#match-img").attr("src", data.photo);
					$("#results-modal").modal("toggle");
				});

			} else {
				alert("Please fill out all fields before submitting!");
			}
		});
	</script>
</body>

</html>